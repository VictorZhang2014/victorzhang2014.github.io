<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="google-site-verification" content="" />
  
  <title>Python的科学计算包 - NumPy</title>
  <meta name="author" content="Victor Zhang">
  <meta name="description" content="iOS,逆向工程,AI,.NET">
  
  
  <meta property="og:title" content="Python的科学计算包 - NumPy"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:site_name" content="Simple, but perfect"/>
  <link href="/apple-touch-icon-precomposed.png" sizes="180x180" rel="apple-touch-icon-precomposed">
  <link rel="alternate" href="/atom.xml" title="Simple, but perfect" type="application/atom+xml">
  <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/m.min.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>

<body>
  <a id="top"></a>
  <div id="main">
    <div class="behind">
      <a href="/" class="back black-color">
        <svg class="i-close" viewBox="0 0 32 32" width="22" height="22" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
            <path d="M2 30 L30 2 M30 30 L2 2"></path>
        </svg>
      </a>
      <div class="description">
        &nbsp;What will you do if you weren't afraid ? 
      </div>
    </div>
    <div class="container">
      

  <article class="standard post">
    <div class="title">
      
  
    <h1 class="page-title center">
        Python的科学计算包 - NumPy
    </h1>
  


    </div>
    <div class="meta center">
      
<time datetime="2017-12-24T14:15:04.000Z">
<svg class="i-calendar" viewBox="0 0 32 32" width="14" height="14" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
    <path d="M2 6 L2 30 30 30 30 6 Z M2 15 L30 15 M7 3 L7 9 M13 3 L13 9 M19 3 L19 9 M25 3 L25 9"></path>
  </svg>
  &nbsp;
  2017-12-24
</time>



    
    &nbsp;
    <svg class="i-tag" viewBox="0 0 32 32" width="14" height="14" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
      <circle cx="24" cy="8" r="2"></circle>
      <path d="M2 18 L18 2 30 2 30 14 14 30 Z"></path>
    </svg>
    &nbsp;
    <a href="/categories/AI/">AI</a>




    
    &nbsp;
    <svg class="i-tag" viewBox="0 0 32 32" width="14" height="14" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
      <circle cx="24" cy="8" r="2"></circle>
      <path d="M2 18 L18 2 30 2 30 14 14 30 Z"></path>
    </svg>
    &nbsp;
    <a href="/tags/Python-Numpy/">Python, Numpy</a>


    </div>
    <hr>
    <div class="picture-container">
      
    </div>
    <p><a href="http://www.numpy.org/" target="_blank" rel="noopener">NumPy</a> (Numerical Python extensions)是一个第三方的Python包，用于科学计算。这个库的前身是1995年就开始开发的一个用于数组运算的库。经过了长时间的发展，基本上成了绝大部分Python科学计算的基础包，当然也包括所有提供Python接口的深度学习框架。)</p>
<p>NumPy是用Python编写的，用于科学计算的基础包，包含了以下四种特性：</p>
<ul>
<li>对于处理N维数组对象非常强大</li>
<li>复杂（广播）函数 sophisticated (broadcasting) functions</li>
<li>便于集成C/C++/Fortran代码</li>
<li>支持线性代数，博里叶变换，随机数</li>
</ul>
<p>通过Github直接下载源码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 对于NumPy</span><br><span class="line">git clone https://github.com/numpy/numpy.git numpy</span><br><span class="line"></span><br><span class="line"># 对于SciPy</span><br><span class="line">git clone https://github.com/scipy/scipy.git scipy</span><br></pre></td></tr></table></figure></p>
<p><a href="http://www.googleplus.party/2017/12/30/NumPy,%20SciPy%E5%92%8CPandas%E7%9A%84%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" target="_blank" rel="noopener">下载安装NumPy, SciPy, Pandas</a></p>
<p><br></p>
<h2 id="1-基本类型array"><a href="#1-基本类型array" class="headerlink" title="1.基本类型array"></a>1.基本类型array</h2><p>array，也就是数组，是numpy中最基础的数据结构，最关键的属性是维度和元素类型，在numpy中，可以非常方便地创建各种不同类型的多维数组，并且执行一些基本基本操作，来看例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"># coding: utf8</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">a = [1, 2, 3, 4]     	    # 创建一个Python数组</span><br><span class="line">b = np.array(a)         	# 根据a创建一个array([1, 2, 3, 4])</span><br><span class="line">type(b)                   	# &lt;type &apos;numpy.ndarray&apos;&gt;</span><br><span class="line"></span><br><span class="line">b.shape                   	# (4,)  一维矩阵长度为4</span><br><span class="line">b.argmax()               	# 3     最大索引</span><br><span class="line">b.max()                   	# 4     最大值</span><br><span class="line">b.mean()                  	# 2.5   平均值</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c = [[1,2],[3,4]]    # 二维Python数组</span><br><span class="line">d = np.array(c)      # 二维NumPy数组</span><br><span class="line">print d.shape        # (2, 2)</span><br><span class="line">print d.size         # 4</span><br><span class="line">print d.max(axis=0)  # [3 4]</span><br><span class="line">print d.max(axis=1)  # [2 4]</span><br><span class="line">print d.flatten()    # 将二维数组转成一维数组</span><br><span class="line">print np.ravel(d)    # 将二维数组转成一维数组</span><br><span class="line"></span><br><span class="line"># 3x3的浮点二维矩阵，并初始化为所有值为1</span><br><span class="line">e = np.ones((3,3), dtype=np.float)</span><br><span class="line">print e</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">[[ 1.  1.  1.]</span><br><span class="line"> [ 1.  1.  1.]</span><br><span class="line"> [ 1.  1.  1.]]</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># 创建一个一维数组，并把元素值3重复4次</span><br><span class="line">f = np.repeat(3,4)</span><br><span class="line">print f</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">[3 3 3 3]</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line"># 创建2x2x3无符号8位整型的三维数组，并且初始化所有值为0</span><br><span class="line">g = np.zeros((2,2,3), dtype=np.uint8)</span><br><span class="line">print g</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">[</span><br><span class="line">  [</span><br><span class="line">    [0 0 0]</span><br><span class="line">    [0 0 0]</span><br><span class="line">  ]</span><br><span class="line">  [</span><br><span class="line">    [0 0 0]</span><br><span class="line">    [0 0 0]</span><br><span class="line">  ]</span><br><span class="line">]</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">print g.shape     # (2, 2, 3)</span><br><span class="line">print g.astype(np.float)  # 将每个元素都转换成float类型</span><br><span class="line"></span><br><span class="line"># 创建一个新数组，内存上并不填充任何值</span><br><span class="line">a = np.empty((2,3,2))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">l = np.arange(10)   # 创建NumPy的一维数组，10个长度</span><br><span class="line">print l.shape       # (10,)</span><br><span class="line">m = np.linspace(0,6,5) # 对0到6之间，取5个值</span><br><span class="line">print m             #  [ 0.   1.5  3.   4.5  6. ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = np.array([[1,2,3,4],[5,6,7,8]])</span><br><span class="line">np.save(&apos;p.npy&apos;, p)    #将数组保存成文件</span><br><span class="line">q = np.load(&apos;p.npy&apos;)   #加载制定文件的数组</span><br><span class="line">print q</span><br></pre></td></tr></table></figure></p>
<p>注意到在导入numpy的时候，我们将np作为numpy的别名。这是一种习惯性的用法，后面的章节中我们也默认这么使用。作为一种多维数组结构，array的数组相关操作是非常丰富的</p>
<h2 id="向量相加"><a href="#向量相加" class="headerlink" title="向量相加"></a>向量相加</h2><p>一个一维数组就是一个向量，在python中的向量是不可以相加运算，但是numpy就可以<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(5)</span><br><span class="line">b = np.arange(5)</span><br><span class="line">print a + b</span><br></pre></td></tr></table></figure></p>
<h1 id="NumPy支持的数据类型"><a href="#NumPy支持的数据类型" class="headerlink" title="NumPy支持的数据类型"></a>NumPy支持的数据类型</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">int8, unit8</span><br><span class="line">uint16, uint16</span><br><span class="line">int32, uint32</span><br><span class="line">int64, uint64</span><br><span class="line">float16</span><br><span class="line">float32</span><br><span class="line">float64</span><br><span class="line">float128</span><br><span class="line">complex64, complex128, complex256</span><br><span class="line">bool                ?</span><br><span class="line">object              O</span><br><span class="line">string_             S</span><br><span class="line">unicode_            U</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 初始化指定类型</span><br><span class="line">print np.arange(7, dtype=np.uint16)</span><br><span class="line">&apos;&apos;&apos;[0 1 2 3 4 5 6]&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 数据类型转换</span><br><span class="line">arr = np.array([1,2,3,4])</span><br><span class="line">print arr.dtype    #输出 int64</span><br><span class="line"></span><br><span class="line">float_arr = arr.astype(np.float64)</span><br><span class="line">print float_arr   # [ 1.  2.  3.  4.]</span><br><span class="line"></span><br><span class="line">str = np.array([&apos;1.2&apos;, &apos;-9.79&apos;, &apos;42&apos;], dtype=np.string_)</span><br><span class="line">print str   # 输出[&apos;1.2&apos; &apos;-9.79&apos; &apos;42&apos;]</span><br><span class="line"></span><br><span class="line">print str.astype(float)  # 输出[  1.2   -9.79  42.  ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 数据类型对象</span><br><span class="line">a = np.array([[1,2],[3,4]])</span><br><span class="line">print a.dtype    # 打印数组元素类型 : int64</span><br><span class="line">print a.dtype.byteorder</span><br><span class="line">print a.dtype.itemsize   # 打印数组元素类型大小 ： 8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 字符编码</span><br><span class="line"># 如果觉得dtype=np.string_太长的话，也可以写字符编码的简短形式</span><br><span class="line">print np.arange(7, dtype=&apos;f&apos;)    # 浮点类型</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 0.  1.  2.  3.  4.  5.  6.]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print np.arange(7, dtype=&apos;D&apos;)   # 复数类型</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 0.+0.j  1.+0.j  2.+0.j  3.+0.j  4.+0.j  5.+0.j  6.+0.j]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print np.dtype(float)   # float64</span><br><span class="line">print np.dtype(&apos;f&apos;)     # float32</span><br><span class="line">print np.dtype(&apos;f8&apos;)    # float64</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># dtype类的属性</span><br><span class="line">t = np.dtype(&apos;Float64&apos;)</span><br><span class="line">print t.char    # 打印类型，双精度：d</span><br><span class="line">print t.type    # &lt;type &apos;numpy.float64&apos;&gt;</span><br><span class="line">print t.str     # 打印对应的编码：&lt;f8</span><br></pre></td></tr></table></figure>
<p>创建自定义数据类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 自定义类型的基本结构</span><br><span class="line"># np.dtype([(name, dtype, len),(name, dtype, len),(name, dtype, len)])</span><br><span class="line"></span><br><span class="line"># 第一步，这是自定义类型，下面就可以使用t作为数据类型</span><br><span class="line">t = np.dtype([(&apos;name&apos;, np.str_, 40), (&apos;numitems&apos;, np.int32), (&apos;price&apos;, np.float32)])</span><br><span class="line">print t</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[(&apos;name&apos;, &apos;S40&apos;), (&apos;numitems&apos;, &apos;&lt;i4&apos;), (&apos;price&apos;, &apos;&lt;f4&apos;)]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print t[&apos;name&apos;]</span><br><span class="line"></span><br><span class="line"># 使用自定义类型创建对象</span><br><span class="line">itemz = np.array([(&apos;Victor&apos;, 20, 3.14), (&apos;Buffet&apos;, 10, 2.34)], dtype=t)</span><br><span class="line">print itemz</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[(&apos;Victor&apos;, 20,  3.1400001 ) (&apos;Buffet&apos;, 10,  2.33999991)]</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure></p>
<h2 id="数组与标量的运算"><a href="#数组与标量的运算" class="headerlink" title="数组与标量的运算"></a>数组与标量的运算</h2><p>对于NumPy来说可以少写很多for循环，而且可以完成数组运算，这种方式就叫做<code>向量化编程</code></p>
<p>以下说下运算符，假如：a=10, b=20;</p>
<ul>
<li><strong> + </strong>      加 - 两个对象相加                                  a + b 输出结果 30</li>
<li><strong> - </strong>      减 - 得到负数或是一个数减去另一个数                    a - b 输出结果 -10</li>
<li><strong> * </strong>      乘 - 两个数相乘或是返回一个被重复若干次的字符串          a * b 输出结果 200</li>
<li><strong> / </strong>      除 - x除以y                                       b / a 输出结果 2</li>
<li><strong> % </strong>      取模 - 返回除法的余数                               b % a 输出结果 0</li>
<li><strong> </strong> <strong>    幂 - 返回x的y次幂                                   a</strong>b 为10的20次方， 输出结果 100000000000000000000</li>
<li><strong> // </strong>    取整除 - 返回商的整数部分                            9//2 输出结果 4 , 9.0//2.0 输出结果 4.0</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">arr = np.array([[1., 2., 3.], [4., 5., 6.]])</span><br><span class="line">print arr</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 1.  2.  3.]</span><br><span class="line"> [ 4.  5.  6.]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 数组相加</span><br><span class="line">print arr + arr</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[  2.   4.   6.]</span><br><span class="line"> [  8.  10.  12.]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 数组相减</span><br><span class="line">print arr - arr</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0.  0.  0.]</span><br><span class="line"> [ 0.  0.  0.]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 用1除以每个数组元素，返回数组</span><br><span class="line">print 1 / arr</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 1.          0.5         0.33333333]</span><br><span class="line"> [ 0.25        0.2         0.16666667]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 对arr数组里的每个元素都进行0.5次方运算</span><br><span class="line">print arr ** 0.5</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 1.          1.41421356  1.73205081]</span><br><span class="line"> [ 2.          2.23606798  2.44948974]]</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<h2 id="一维数组的索引与切片"><a href="#一维数组的索引与切片" class="headerlink" title="一维数组的索引与切片"></a>一维数组的索引与切片</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">a = np.arange(9)</span><br><span class="line"></span><br><span class="line"># : 冒号表示从...到...，如果只写了冒号，没有写数字，表示从头到尾</span><br><span class="line"># 取3到7的数</span><br><span class="line"># 第一组</span><br><span class="line">print a[3:7]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[3 4 5 6]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 取 从0到7 每间隔为2的数</span><br><span class="line"># 第二组</span><br><span class="line">print a[:7:2]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[0 2 4 6]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 对一维数组进行倒序</span><br><span class="line"># 第三组</span><br><span class="line">print a[::-1]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[8 7 6 5 4 3 2 1 0]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 跟第一组一样</span><br><span class="line">s = slice(3, 7)</span><br><span class="line">print a[s]</span><br><span class="line"></span><br><span class="line"># 跟第二组一样</span><br><span class="line">s = slice(None, 7, 2)</span><br><span class="line">print a[s]</span><br><span class="line"></span><br><span class="line"># 跟第三组一样</span><br><span class="line">s = slice(None, None, -1)</span><br><span class="line">print a[s]</span><br></pre></td></tr></table></figure>
<h2 id="多维数组的切片与索引"><a href="#多维数组的切片与索引" class="headerlink" title="多维数组的切片与索引"></a>多维数组的切片与索引</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">b = np.arange(24).reshape(2,3,4)</span><br><span class="line">print b.shape</span><br><span class="line">print b</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[[ 0  1  2  3]</span><br><span class="line">  [ 4  5  6  7]</span><br><span class="line">  [ 8  9 10 11]]</span><br><span class="line"></span><br><span class="line"> [[12 13 14 15]</span><br><span class="line">  [16 17 18 19]</span><br><span class="line">  [20 21 22 23]]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 取第一维度的第0行第0列的值</span><br><span class="line">print b[0,0,0]</span><br><span class="line"></span><br><span class="line"># 取第一维度和第二维度的第0行的第0列的值</span><br><span class="line">print b[:, 0, 0]   # [ 0, 12 ]</span><br><span class="line"></span><br><span class="line"># 取第0维度上的所有元素的值</span><br><span class="line">print b[0, :, :]</span><br><span class="line"># 也可以使用... 三个点表示后面的都选上</span><br><span class="line">print b[0, ...]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0  1  2  3]</span><br><span class="line"> [ 4  5  6  7]</span><br><span class="line"> [ 8  9 10 11]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 取第0维度的索引为1的那一行的所有元素的值</span><br><span class="line">print b[0, 1]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[4 5 6 7]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 取第0维度上的索引为1的那一行上间隔为2的所有值</span><br><span class="line">print b[0, 1, ::2]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[4 6]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 取第0维度和第1维度上的索引为1的那一列的所有的值</span><br><span class="line">print b[..., 1]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 1  5  9]</span><br><span class="line"> [13 17 21]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 取第0维度和第1维度上索引为1的那一行的所有的值</span><br><span class="line">print b[:, 1]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 4  5  6  7]</span><br><span class="line"> [16 17 18 19]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 取第0维度上所有行的第索引为1列的所有的值</span><br><span class="line">print b[0, :, 1]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[1 5 9]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 取第0维度上所有行的倒数第一列的所有的值</span><br><span class="line">print b[0, :, -1]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 3  7 11]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 对第0维度上所有的行倒序，然后再根据倒序的结果取倒数第一列的值</span><br><span class="line">print b[0, ::-1, -1]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[11  7  3]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 取第0维度上每间隔为2行的数，再取倒数第一列的值</span><br><span class="line">print b[0, ::2, -1]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 3 11]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 对这两个矩阵反转</span><br><span class="line">print b[::-1]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[[12 13 14 15]</span><br><span class="line">  [16 17 18 19]</span><br><span class="line">  [20 21 22 23]]</span><br><span class="line"></span><br><span class="line"> [[ 0  1  2  3]</span><br><span class="line">  [ 4  5  6  7]</span><br><span class="line">  [ 8  9 10 11]]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 我们也可以使用slice切片来取值</span><br><span class="line"># 以下是反转两个矩阵，也就是把这两个矩阵换个索引位置</span><br><span class="line">s = slice(None, None, -1)</span><br><span class="line">print b[s]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[[12 13 14 15]</span><br><span class="line">  [16 17 18 19]</span><br><span class="line">  [20 21 22 23]]</span><br><span class="line"></span><br><span class="line"> [[ 0  1  2  3]</span><br><span class="line">  [ 4  5  6  7]</span><br><span class="line">  [ 8  9 10 11]]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 如果我们需要:</span><br><span class="line"># 1.把两个矩阵反转</span><br><span class="line"># 2.把每个矩阵的所有行反转</span><br><span class="line"># 3.把每个矩阵的每一行的所有元素反转</span><br><span class="line">print b[s, s, s]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[[23 22 21 20]</span><br><span class="line">  [19 18 17 16]</span><br><span class="line">  [15 14 13 12]]</span><br><span class="line"></span><br><span class="line"> [[11 10  9  8]</span><br><span class="line">  [ 7  6  5  4]</span><br><span class="line">  [ 3  2  1  0]]]</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<h2 id="布尔型索引"><a href="#布尔型索引" class="headerlink" title="布尔型索引"></a>布尔型索引</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">names = np.array([&apos;Bob&apos;,&apos;Joe&apos;,&apos;Will&apos;,&apos;Victor&apos;,&apos;Dwayne&apos;])</span><br><span class="line"></span><br><span class="line"># 对names里每个元素和&apos;Bob&apos;比较，并返回一个数组</span><br><span class="line">print names == &apos;Bob&apos;</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ True False False False False]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print (names == &apos;Bob&apos;) | (names == &apos;Will&apos;)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ True False  True False False]</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<h2 id="花式索引"><a href="#花式索引" class="headerlink" title="花式索引"></a>花式索引</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"># coding: utf8</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line"># 创建一个8行乘以4列的数组</span><br><span class="line">arr = np.empty((8, 4))</span><br><span class="line">print arr</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ -3.10503618e+231   3.11107876e+231  -1.07161239e+217   2.19870404e-314]</span><br><span class="line"> [  2.19870333e-314   0.00000000e+000   0.00000000e+000   0.00000000e+000]</span><br><span class="line"> [  1.00253535e-307   2.19378191e-314   2.19435524e-314  -9.27386883e+283]</span><br><span class="line"> [  2.19377210e-314   2.19871256e-314  -6.22760761e-002   2.19439352e-314]</span><br><span class="line"> [  2.19446055e-314   2.09658325e-114   2.19858697e-314   6.92818888e-310]</span><br><span class="line"> [  1.49578392e+091   2.19870406e-314   2.19870337e-314  -1.47948881e-261]</span><br><span class="line"> [  2.19377200e-314   6.92819029e-310  -1.28433547e-117   2.19435531e-314]</span><br><span class="line"> [  2.19434605e-314   8.34595430e-044   2.19870444e-314   2.22507606e-308]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 将每一列的值改成0到8</span><br><span class="line">for i in range(8):</span><br><span class="line">    arr[i] = i</span><br><span class="line">print arr</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0.  0.  0.  0.]</span><br><span class="line"> [ 1.  1.  1.  1.]</span><br><span class="line"> [ 2.  2.  2.  2.]</span><br><span class="line"> [ 3.  3.  3.  3.]</span><br><span class="line"> [ 4.  4.  4.  4.]</span><br><span class="line"> [ 5.  5.  5.  5.]</span><br><span class="line"> [ 6.  6.  6.  6.]</span><br><span class="line"> [ 7.  7.  7.  7.]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 选择索引为4，3，0，6行的值</span><br><span class="line">print arr[[4, 3, 0, 6]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 4.  4.  4.  4.]</span><br><span class="line"> [ 3.  3.  3.  3.]</span><br><span class="line"> [ 0.  0.  0.  0.]</span><br><span class="line"> [ 6.  6.  6.  6.]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 也可以通过倒序索引的形式选取行的数据</span><br><span class="line"># 取倒序索引的-3, -5, -7的行的值</span><br><span class="line">print arr[[-3, -5, -7]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 5.  5.  5.  5.]</span><br><span class="line"> [ 3.  3.  3.  3.]</span><br><span class="line"> [ 1.  1.  1.  1.]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">arr = np.arange(32).reshape((8, 4))</span><br><span class="line">print arr</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0  1  2  3]</span><br><span class="line"> [ 4  5  6  7]</span><br><span class="line"> [ 8  9 10 11]</span><br><span class="line"> [12 13 14 15]</span><br><span class="line"> [16 17 18 19]</span><br><span class="line"> [20 21 22 23]</span><br><span class="line"> [24 25 26 27]</span><br><span class="line"> [28 29 30 31]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 取 arr[1][0], arr[5][3], arr[7][1], arr[2][2]</span><br><span class="line">print arr[[1, 5, 7, 2], [0, 3, 1, 2]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 4 23 29 10]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 返回一个区域的值</span><br><span class="line">print arr[[1, 5, 7, 2]][:, [0, 3, 1, 2]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 4  7  5  6]</span><br><span class="line"> [20 23 21 22]</span><br><span class="line"> [28 31 29 30]</span><br><span class="line"> [ 8 11  9 10]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 跟上一个一样</span><br><span class="line">print arr[np.ix_([1, 5, 7, 2], [0, 3, 1, 2])]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 4  7  5  6]</span><br><span class="line"> [20 23 21 22]</span><br><span class="line"> [28 31 29 30]</span><br><span class="line"> [ 8 11  9 10]]</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<h2 id="数组转置"><a href="#数组转置" class="headerlink" title="数组转置"></a>数组转置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># coding: utf8</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">arr = np.arange(15).reshape((3, 5))</span><br><span class="line">print arr</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0  1  2  3  4]</span><br><span class="line"> [ 5  6  7  8  9]</span><br><span class="line"> [10 11 12 13 14]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 3行5列转成5行三列</span><br><span class="line">print arr.T</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0  5 10]</span><br><span class="line"> [ 1  6 11]</span><br><span class="line"> [ 2  7 12]</span><br><span class="line"> [ 3  8 13]</span><br><span class="line"> [ 4  9 14]]</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<h2 id="改变数组的维度"><a href="#改变数组的维度" class="headerlink" title="改变数组的维度"></a>改变数组的维度</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"># coding: utf8</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line"># arange是生成一个一维数组</span><br><span class="line"># reshape就可以改变数组的维度</span><br><span class="line">b = np.arange(24).reshape((2,3,4))</span><br><span class="line">print b</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[[ 0  1  2  3]</span><br><span class="line">  [ 4  5  6  7]</span><br><span class="line">  [ 8  9 10 11]]</span><br><span class="line"></span><br><span class="line"> [[12 13 14 15]</span><br><span class="line">  [16 17 18 19]</span><br><span class="line">  [20 21 22 23]]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 把多维数组展开 成 一维数组</span><br><span class="line">print b.flatten()</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print b.ravel()</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 还可以将数组的shape改变，就是6行4列</span><br><span class="line">b.shape = (6, 4)</span><br><span class="line">print b</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0  1  2  3]</span><br><span class="line"> [ 4  5  6  7]</span><br><span class="line"> [ 8  9 10 11]</span><br><span class="line"> [12 13 14 15]</span><br><span class="line"> [16 17 18 19]</span><br><span class="line"> [20 21 22 23]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 转矩阵，可以把b这个多维数组，向反方向维度的转换，</span><br><span class="line"># 比如: 上面的6行4列，转换后，就是4行6列</span><br><span class="line">print b.transpose()</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0  4  8 12 16 20]</span><br><span class="line"> [ 1  5  9 13 17 21]</span><br><span class="line"> [ 2  6 10 14 18 22]</span><br><span class="line"> [ 3  7 11 15 19 23]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># resize和reshape的功能是一样的</span><br><span class="line">b.resize((2, 12))</span><br><span class="line">print b</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0  1  2  3  4  5  6  7  8  9 10 11]</span><br><span class="line"> [12 13 14 15 16 17 18 19 20 21 22 23]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 进一步开transpose函数的反置换数组</span><br><span class="line">print b.transpose()</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0 12]</span><br><span class="line"> [ 1 13]</span><br><span class="line"> [ 2 14]</span><br><span class="line"> [ 3 15]</span><br><span class="line"> [ 4 16]</span><br><span class="line"> [ 5 17]</span><br><span class="line"> [ 6 18]</span><br><span class="line"> [ 7 19]</span><br><span class="line"> [ 8 20]</span><br><span class="line"> [ 9 21]</span><br><span class="line"> [10 22]</span><br><span class="line"> [11 23]]</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<h2 id="数组的分割"><a href="#数组的分割" class="headerlink" title="数组的分割"></a>数组的分割</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line"># coding=utf8</span><br><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">a = np.arange(9).reshape(3, 3)</span><br><span class="line">print a</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[0 1 2]</span><br><span class="line"> [3 4 5]</span><br><span class="line"> [6 7 8]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">b = 2 * a</span><br><span class="line">print b</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0  2  4]</span><br><span class="line"> [ 6  8 10]</span><br><span class="line"> [12 14 16]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 水平组合两个数组</span><br><span class="line">print np.hstack((a, b))</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0  1  2  0  2  4]</span><br><span class="line"> [ 3  4  5  6  8 10]</span><br><span class="line"> [ 6  7  8 12 14 16]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># axis=1 表示水平，和上面的hstack一样</span><br><span class="line">print np.concatenate((a, b), axis=1)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0  1  2  0  2  4]</span><br><span class="line"> [ 3  4  5  6  8 10]</span><br><span class="line"> [ 6  7  8 12 14 16]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 垂直组合两个数组</span><br><span class="line">print np.vstack((a, b))</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0  1  2]</span><br><span class="line"> [ 3  4  5]</span><br><span class="line"> [ 6  7  8]</span><br><span class="line"> [ 0  2  4]</span><br><span class="line"> [ 6  8 10]</span><br><span class="line"> [12 14 16]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># axis=0表示垂直，和上面的vstack一样</span><br><span class="line">print np.concatenate((a, b), axis=0)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0  1  2]</span><br><span class="line"> [ 3  4  5]</span><br><span class="line"> [ 6  7  8]</span><br><span class="line"> [ 0  2  4]</span><br><span class="line"> [ 6  8 10]</span><br><span class="line"> [12 14 16]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 深度组合，就是将多个矩阵平面点数据沿着纵轴合并（垂直合并）</span><br><span class="line">print np.dstack((a, b))</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[[ 0  0]</span><br><span class="line">  [ 1  2]</span><br><span class="line">  [ 2  4]]</span><br><span class="line"></span><br><span class="line"> [[ 3  6]</span><br><span class="line">  [ 4  8]</span><br><span class="line">  [ 5 10]]</span><br><span class="line"></span><br><span class="line"> [[ 6 12]</span><br><span class="line">  [ 7 14]</span><br><span class="line">  [ 8 16]]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 这个方式和dstack是一样的，就是列垂直组合</span><br><span class="line">one = np.arange(2)</span><br><span class="line">two = one * 2</span><br><span class="line">print np.column_stack((one, two))</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[0 0]</span><br><span class="line"> [1 2]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 水平组合</span><br><span class="line">print np.row_stack((one, two))</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[0 1]</span><br><span class="line"> [0 2]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = np.arange(9).reshape(3, 3)</span><br><span class="line">print a</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[0 1 2]</span><br><span class="line"> [3 4 5]</span><br><span class="line"> [6 7 8]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 水平分割 成 三份相同大小的数组</span><br><span class="line">print np.hsplit(a, 3)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[array([[0],</span><br><span class="line">       [3],</span><br><span class="line">       [6]]), </span><br><span class="line"> array([[1],</span><br><span class="line">       [4],</span><br><span class="line">       [7]]), </span><br><span class="line"> array([[2],</span><br><span class="line">       [5],</span><br><span class="line">       [8]])]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 垂直分割</span><br><span class="line">print np.vsplit(a, 3)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[array([[0, 1, 2]]), array([[3, 4, 5]]), array([[6, 7, 8]])]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 或者还可以使用split函数，并且指定axis</span><br><span class="line"></span><br><span class="line"># 水平分割</span><br><span class="line">print np.split(a, 3, axis=1)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[array([[0],</span><br><span class="line">       [3],</span><br><span class="line">       [6]]), </span><br><span class="line"> array([[1],</span><br><span class="line">       [4],</span><br><span class="line">       [7]]), </span><br><span class="line"> array([[2],</span><br><span class="line">       [5],</span><br><span class="line">       [8]])]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 垂直分割</span><br><span class="line">print np.split(a, 3, axis=0)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[array([[0, 1, 2]]), array([[3, 4, 5]]), array([[6, 7, 8]])]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 深度分割</span><br><span class="line">c = np.arange(27).reshape((3, 3, 3))</span><br><span class="line">print c</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[[ 0  1  2]</span><br><span class="line">  [ 3  4  5]</span><br><span class="line">  [ 6  7  8]]</span><br><span class="line"></span><br><span class="line"> [[ 9 10 11]</span><br><span class="line">  [12 13 14]</span><br><span class="line">  [15 16 17]]</span><br><span class="line"></span><br><span class="line"> [[18 19 20]</span><br><span class="line">  [21 22 23]</span><br><span class="line">  [24 25 26]]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print np.dsplit(c, 3)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[array([[[ 0],</span><br><span class="line">        [ 3],</span><br><span class="line">        [ 6]],</span><br><span class="line"></span><br><span class="line">       [[ 9],</span><br><span class="line">        [12],</span><br><span class="line">        [15]],</span><br><span class="line"></span><br><span class="line">       [[18],</span><br><span class="line">        [21],</span><br><span class="line">        [24]]]), array([[[ 1],</span><br><span class="line">        [ 4],</span><br><span class="line">        [ 7]],</span><br><span class="line"></span><br><span class="line">       [[10],</span><br><span class="line">        [13],</span><br><span class="line">        [16]],</span><br><span class="line"></span><br><span class="line">       [[19],</span><br><span class="line">        [22],</span><br><span class="line">        [25]]]), array([[[ 2],</span><br><span class="line">        [ 5],</span><br><span class="line">        [ 8]],</span><br><span class="line"></span><br><span class="line">       [[11],</span><br><span class="line">        [14],</span><br><span class="line">        [17]],</span><br><span class="line"></span><br><span class="line">       [[20],</span><br><span class="line">        [23],</span><br><span class="line">        [26]]])]</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<h2 id="数组的属性"><a href="#数组的属性" class="headerlink" title="数组的属性"></a>数组的属性</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># coding=utf8</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">b = np.arange(24).reshape((2, 12))</span><br><span class="line">print b.ndim    # 数组的维度</span><br><span class="line">print b.size    # 数组整个大小</span><br><span class="line">print b.itemsize # 数组的元素大小</span><br><span class="line">print b.nbytes   # 数组总占用字节数</span><br><span class="line"></span><br><span class="line">b = np.array([ 1.+1.j, 3.+2.j])</span><br><span class="line">print b.real    # 数组的实步</span><br><span class="line">print b.imag    # 数组的虚步</span><br><span class="line">print b.flat    #  &lt;numpy.flatiter object at 0x7ffa960f4000&gt;</span><br><span class="line">print b.flat[1] # (3+2j)</span><br><span class="line"></span><br><span class="line">b.flat[1] = 700   # 通过flat修改元素的值</span><br><span class="line">print b</span><br></pre></td></tr></table></figure>
<h2 id="数组的转换"><a href="#数组的转换" class="headerlink" title="数组的转换"></a>数组的转换</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># coding=utf8</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">b = np.array([ 1.+1.j, 3.+2.j ])</span><br><span class="line">print b</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 1.+1.j  3.+2.j]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 转成python的list</span><br><span class="line">print b.tolist()</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[(1+1j), (3+2j)]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 打印一堆乱码，因为数组里的元素不是字符串</span><br><span class="line">print b.tostring()</span><br><span class="line"></span><br><span class="line"># 使用冒号分割，然后把分割完的值转成int类型</span><br><span class="line">print np.fromstring(&apos;20:42:52&apos;, sep=&apos;:&apos;, dtype=int)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[20 42 52]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 把数组b里的值都转成int类型</span><br><span class="line">print b.astype(int)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[1 3]</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<h2 id="NumPy的一些通用函数"><a href="#NumPy的一些通用函数" class="headerlink" title="NumPy的一些通用函数"></a>NumPy的一些通用函数</h2><p>通用函数（ufunc）是一种对ndarray中的数据执行元素级运算的函数</p>
<ul>
<li>一元ufunc<br>abs, fabs, sqrt, exp, modf等等</li>
<li>二元ufunc</li>
</ul>
<p>对于一元函数和二元函数，以下就列举一些例子，它的更多用法就去百度搜一下，有很多文章讲解，也很简单<br>如果使用google，就搜索：一元函数（unary function），二元函数（binary function）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"># coding=utf8</span><br><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">arr = np.arange(10)</span><br><span class="line">print arr</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[0 1 2 3 4 5 6 7 8 9]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 分别生成八个随机数，返回数组</span><br><span class="line">x = randn(8)</span><br><span class="line">y = randn(8)</span><br><span class="line">print &quot;x=&quot;, x</span><br><span class="line">print &quot;y=&quot;, y</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">x= [-0.54176858  2.66447488  0.69771148 -1.62758206 -0.83304403 -0.52295269</span><br><span class="line">  0.57753982 -1.64298273]</span><br><span class="line">y= [ 2.31025497  0.22378718 -1.61274711 -1.04259512  0.67085879 -0.33534232</span><br><span class="line"> -0.66599697  0.331158  ]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 元素级最大值</span><br><span class="line">print np.maximum(x, y)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 2.31025497  2.66447488  0.69771148 -1.04259512  0.67085879 -0.33534232</span><br><span class="line">  0.57753982  0.331158  ]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">arr = randn(7) * 5</span><br><span class="line">print arr</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 3.40391963  1.50692787  5.17600018 -0.89995448 -5.40648018  6.2721975</span><br><span class="line">  0.21843185]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 将数组的整数部分和小数部分分开来，作为两个数组返回</span><br><span class="line">print np.modf(arr)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">(array([ 0.40391963,  0.50692787,  0.17600018, -0.89995448, -0.40648018,</span><br><span class="line">        0.2721975 ,  0.21843185]), array([ 3.,  1.,  5., -0., -5.,  6.,  0.]))</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<h2 id="利用数组进行数据处理"><a href="#利用数组进行数据处理" class="headerlink" title="利用数组进行数据处理"></a>利用数组进行数据处理</h2><h2 id="向量化的处理"><a href="#向量化的处理" class="headerlink" title="向量化的处理"></a>向量化的处理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"># coding=utf8</span><br><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line"># 从-5到5，每个值间隔0.1</span><br><span class="line">points = np.arange(-5, 5, 0.1)</span><br><span class="line">print points</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ -5.00000000e+00  -4.90000000e+00  -4.80000000e+00  -4.70000000e+00</span><br><span class="line">  -4.60000000e+00  -4.50000000e+00  -4.40000000e+00  -4.30000000e+00</span><br><span class="line">  -4.20000000e+00  -4.10000000e+00  -4.00000000e+00  -3.90000000e+00</span><br><span class="line">  -3.80000000e+00  -3.70000000e+00  -3.60000000e+00  -3.50000000e+00</span><br><span class="line">  -3.40000000e+00  -3.30000000e+00  -3.20000000e+00  -3.10000000e+00</span><br><span class="line">  -3.00000000e+00  -2.90000000e+00  -2.80000000e+00  -2.70000000e+00</span><br><span class="line">  -2.60000000e+00  -2.50000000e+00  -2.40000000e+00  -2.30000000e+00</span><br><span class="line">  -2.20000000e+00  -2.10000000e+00  -2.00000000e+00  -1.90000000e+00</span><br><span class="line">  -1.80000000e+00  -1.70000000e+00  -1.60000000e+00  -1.50000000e+00</span><br><span class="line">  -1.40000000e+00  -1.30000000e+00  -1.20000000e+00  -1.10000000e+00</span><br><span class="line">  -1.00000000e+00  -9.00000000e-01  -8.00000000e-01  -7.00000000e-01</span><br><span class="line">  -6.00000000e-01  -5.00000000e-01  -4.00000000e-01  -3.00000000e-01</span><br><span class="line">  -2.00000000e-01  -1.00000000e-01  -1.77635684e-14   1.00000000e-01</span><br><span class="line">   2.00000000e-01   3.00000000e-01   4.00000000e-01   5.00000000e-01</span><br><span class="line">   6.00000000e-01   7.00000000e-01   8.00000000e-01   9.00000000e-01</span><br><span class="line">   1.00000000e+00   1.10000000e+00   1.20000000e+00   1.30000000e+00</span><br><span class="line">   1.40000000e+00   1.50000000e+00   1.60000000e+00   1.70000000e+00</span><br><span class="line">   1.80000000e+00   1.90000000e+00   2.00000000e+00   2.10000000e+00</span><br><span class="line">   2.20000000e+00   2.30000000e+00   2.40000000e+00   2.50000000e+00</span><br><span class="line">   2.60000000e+00   2.70000000e+00   2.80000000e+00   2.90000000e+00</span><br><span class="line">   3.00000000e+00   3.10000000e+00   3.20000000e+00   3.30000000e+00</span><br><span class="line">   3.40000000e+00   3.50000000e+00   3.60000000e+00   3.70000000e+00</span><br><span class="line">   3.80000000e+00   3.90000000e+00   4.00000000e+00   4.10000000e+00</span><br><span class="line">   4.20000000e+00   4.30000000e+00   4.40000000e+00   4.50000000e+00</span><br><span class="line">   4.60000000e+00   4.70000000e+00   4.80000000e+00   4.90000000e+00]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">xs, ys = np.meshgrid(points, points)</span><br><span class="line">print xs</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[-5.  -4.9 -4.8 ...,  4.7  4.8  4.9]</span><br><span class="line"> [-5.  -4.9 -4.8 ...,  4.7  4.8  4.9]</span><br><span class="line"> [-5.  -4.9 -4.8 ...,  4.7  4.8  4.9]</span><br><span class="line"> ..., </span><br><span class="line"> [-5.  -4.9 -4.8 ...,  4.7  4.8  4.9]</span><br><span class="line"> [-5.  -4.9 -4.8 ...,  4.7  4.8  4.9]</span><br><span class="line"> [-5.  -4.9 -4.8 ...,  4.7  4.8  4.9]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print ys</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[-5.  -5.  -5.  ..., -5.  -5.  -5. ]</span><br><span class="line"> [-4.9 -4.9 -4.9 ..., -4.9 -4.9 -4.9]</span><br><span class="line"> [-4.8 -4.8 -4.8 ..., -4.8 -4.8 -4.8]</span><br><span class="line"> ..., </span><br><span class="line"> [ 4.7  4.7  4.7 ...,  4.7  4.7  4.7]</span><br><span class="line"> [ 4.8  4.8  4.8 ...,  4.8  4.8  4.8]</span><br><span class="line"> [ 4.9  4.9  4.9 ...,  4.9  4.9  4.9]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">z = np.sqrt(xs ** 2 + ys ** 2)</span><br><span class="line">print z</span><br><span class="line"></span><br><span class="line">plt.imshow(z, cmap=plt.cm.gray)</span><br><span class="line">plt.colorbar()</span><br><span class="line">plt.title(&quot;image plot of $\sqrt&#123;x^2 + y^2&#125;$ for a grid of values&quot;)</span><br><span class="line">plt.draw()</span><br></pre></td></tr></table></figure>
<h1 id="将条件逻辑表达为数组运算"><a href="#将条件逻辑表达为数组运算" class="headerlink" title="将条件逻辑表达为数组运算"></a>将条件逻辑表达为数组运算</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"># coding=utf8</span><br><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">xarr = np.array([1.1, 1.2, 1.3, 1.4, 1.5])</span><br><span class="line">yarr = np.array([2.1, 2.2, 2.3, 2.4, 2.5])</span><br><span class="line">cond = np.array([True, False, True, True, False])</span><br><span class="line"></span><br><span class="line"># 列表推导式</span><br><span class="line"># 如果c等于True，则执行x，否则执行y</span><br><span class="line">result = [(x if c else y)</span><br><span class="line"> for x, y, c in zip(xarr, yarr, cond)]</span><br><span class="line"># zip函数的意思是将三个参数作为一个数组，元素是tuple类型返回</span><br><span class="line"></span><br><span class="line">print result</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[1.1000000000000001, 2.2000000000000002, 1.3, 1.3999999999999999, 2.5]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 上面的列表推导式 当数据量大时，性能不高，因为它是纯python的，所以numpy就有一个函数，高性能的处理这样的问题</span><br><span class="line">result = np.where(cond, xarr, yarr)</span><br><span class="line">print result</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 1.1  2.2  1.3  1.4  2.5]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 生成一个4乘以4的随机数数组</span><br><span class="line">arr_rand = randn(4, 4)</span><br><span class="line">print arr_rand</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[-1.75446035  0.55942022  0.03802657  1.17424156]</span><br><span class="line"> [-0.52429608 -0.08689923  0.00603974  1.96522324]</span><br><span class="line"> [ 0.68151676 -0.39275041  0.14206361 -1.24419373]</span><br><span class="line"> [ 1.41926654 -0.52600884 -0.04940465 -0.37086705]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 然后我们使用where函数</span><br><span class="line"># 数组里大于0的元素时，填充2，反之，填充-2</span><br><span class="line">print np.where(arr_rand &gt; 0, 2, -2)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[-2  2  2  2]</span><br><span class="line"> [-2 -2  2  2]</span><br><span class="line"> [ 2 -2  2 -2]</span><br><span class="line"> [ 2 -2 -2 -2]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 数组里的元素大于0时，填充2，反之，填充它本身的值</span><br><span class="line">print np.where(arr_rand &gt; 0, 2, arr_rand)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[-1.75446035  2.          2.          2.        ]</span><br><span class="line"> [-0.52429608 -0.08689923  2.          2.        ]</span><br><span class="line"> [ 2.         -0.39275041  2.         -1.24419373]</span><br><span class="line"> [ 2.         -0.52600884 -0.04940465 -0.37086705]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 如果没有where函数的，我们就需要执行for循环，还需要一些判断才行</span><br><span class="line"></span><br><span class="line"># 来个复杂点的where使用</span><br><span class="line"># np.where(cond1 &amp; cond2, 0, np.where(cond1, 1, np.where(cond2, 2, 3)))</span><br></pre></td></tr></table></figure>
<h2 id="数学和统计方法"><a href="#数学和统计方法" class="headerlink" title="数学和统计方法"></a>数学和统计方法</h2><p>sum    求和<br>mean   求平均数<br>std    求标准值<br>var    求方差<br>min    求最小值<br>max    求最大值<br>argmin 求最小索引<br>argmax 求最大索引<br>cumsum 求所有元素的累计和<br>cumprod 求所有元素的累计积<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">arr = randn(5, 4)</span><br><span class="line">print arr</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[-0.69532575 -0.46587784  0.09154531  0.02780419]</span><br><span class="line"> [ 1.65731101  0.99630076 -0.62135179 -0.73975346]</span><br><span class="line"> [-0.16868977  0.50925681 -0.21328851  0.88459092]</span><br><span class="line"> [-1.23530288  0.15287639 -0.61429954 -0.17145152]</span><br><span class="line"> [-0.04142243  2.03859271  0.4526737   0.42605781]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print np.mean(arr)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">-0.0496905416252</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print np.sum(arr)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">6.03672937318</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print np.min(arr)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">-1.03827242655</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print np.max(arr)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">2.04400453423</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">arr = np.array([[0,1,2], [3,4,5], [6,7,8]])</span><br><span class="line">print arr.cumsum(0)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[ 0  1  2]</span><br><span class="line"> [ 3  5  7]</span><br><span class="line"> [ 9 12 15]]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print arr.cumprod(1)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[[  0   0   0]</span><br><span class="line"> [  3  12  60]</span><br><span class="line"> [  6  42 336]]</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure></p>
<h2 id="用在布尔型数组的方法"><a href="#用在布尔型数组的方法" class="headerlink" title="用在布尔型数组的方法"></a>用在布尔型数组的方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># coding=utf8</span><br><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">arr = randn(100)</span><br><span class="line"></span><br><span class="line"># 对大于0的数求和</span><br><span class="line">print (arr &gt; 0).sum()</span><br><span class="line"></span><br><span class="line">bools = np.array([False, False, True, False])</span><br><span class="line"></span><br><span class="line"># 检查数组里，所有的元素中，只要有一个为False，或者为0，就返回True</span><br><span class="line">print bools.any()</span><br><span class="line"></span><br><span class="line"># 检查一个数组里，所有的元素都是True，或者都不等于0的情况下，才返回True</span><br><span class="line">print bools.all()</span><br></pre></td></tr></table></figure>
<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">arr = randn(8)</span><br><span class="line">print arr</span><br><span class="line"></span><br><span class="line"># 排序数组</span><br><span class="line">print arr.sort()</span><br><span class="line"></span><br><span class="line">names = np.array([&apos;Bob&apos;, &apos;Zoe&apos;, &apos;Will&apos;, &apos;Bob&apos;, &apos;Will&apos;])</span><br><span class="line">print names</span><br><span class="line"></span><br><span class="line"># 排重数据，然后排序</span><br><span class="line">print sorted(set(names))</span><br><span class="line"></span><br><span class="line"># 唯一化，就是去重</span><br><span class="line">print np.unique(names)</span><br><span class="line"></span><br><span class="line"># in1d函数意思是，第二个数组里的元素是否在第一个数组里，返回一组数组，True或者False</span><br><span class="line">print np.in1d(names, [ &apos;Will&apos; ])</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[False False  True False  True]</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<h2 id="线性代数"><a href="#线性代数" class="headerlink" title="线性代数"></a>线性代数</h2><p>常用的numpy.linalg函数</p>
<p>diag   以一维数组形式返回方阵的对角线（或非对角线）元素，或将一维数组转换为方阵<br>dot    矩阵乘法<br>trace  计算对角线元素的和<br>det    计算矩阵行列式<br>eig    计算方阵的本征值和本征向量<br>inv    计算方阵的逆<br>pinv   计算矩阵的Moore-Penrose伪逆<br>qr     计算QR分解<br>svd    计算奇异值分解SVD<br>solve  解线性方程组Ax = b，其中A为一个方阵<br>lstsq  计算Ax = b的最小二乘解</p>
<h2 id="随机数生成"><a href="#随机数生成" class="headerlink" title="随机数生成"></a>随机数生成</h2><p>在numpy.random<br>seed         确定随机数生成的种子<br>permutation  返回一个序列的随机排列或返回一个随机排列的范围<br>shuffle      对一个序列就地随机排列<br>rand         产生均匀分布的样本值<br>randint      从给定的上下限范围内随机选取整数<br>randn        产生正态分布（平均值为0，标准差为1）的样本值，类似于Matlab接口<br>binomial     产生二项分布的样本值<br>normal       产生正态（高斯）分布的样本值<br>beta         产生beta分布的样本值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">samples = np.random.normal(size=(4, 4))</span><br><span class="line">print samples</span><br><span class="line"></span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line"># 随机漫步</span><br><span class="line">position = 0</span><br><span class="line">walk = [position]</span><br><span class="line">steps = 1000</span><br><span class="line">for i in xrange(steps):</span><br><span class="line">    step = 1 if random.randint(0, 1) else -1</span><br><span class="line">    position += step</span><br><span class="line">    walk.append(position)</span><br></pre></td></tr></table></figure>
<h2 id="分析股票数据的案例"><a href="#分析股票数据的案例" class="headerlink" title="分析股票数据的案例"></a>分析股票数据的案例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"># coding: utf8</span><br><span class="line"></span><br><span class="line">import sys</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line"># 读取股票文件</span><br><span class="line"># 第一个参数：文件路径</span><br><span class="line"># 第二个参数：分隔符</span><br><span class="line"># 第三个参数：选取的列，这个例子选中第6列和第7列，返回tuple类型，对应每列</span><br><span class="line"># 第四个参数：如名字unpack，就是解包后是否tranpose，true则是</span><br><span class="line">sixth, seventh = np.loadtxt(&apos;Apple_Partion_StockPrices.csv&apos;, delimiter=&apos;,&apos;, usecols=(6, 7), unpack=True)</span><br><span class="line">print seventh</span><br><span class="line"></span><br><span class="line"># 计算成交量加权平均价格</span><br><span class="line">vwap = np.average(sixth, weights=seventh)</span><br><span class="line">print vwap</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">350.589549353</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 算数平均值函数</span><br><span class="line">print &quot;mean =&quot;, np.mean(sixth)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">mean = 351.037666667</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 时间加权平均价格</span><br><span class="line">t = np.arange(len(sixth))</span><br><span class="line">print np.average(sixth, weights=t)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">352.428321839</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 寻找最大值和最小值</span><br><span class="line">h, l = np.loadtxt(&apos;Apple_Partion_StockPrices.csv&apos;, delimiter=&apos;,&apos;, usecols=(4,5), unpack=True)</span><br><span class="line">print &quot;max = &quot;, np.max(h)</span><br><span class="line">print &quot;min = &quot;, np.min(l)</span><br><span class="line">print &quot;最高价和最低价中间的值 = &quot;, (np.max(h) + np.min(l)) / 2</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">max =  364.9</span><br><span class="line">min =  333.53</span><br><span class="line">最高价和最低价中间的值 =  349.215</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print &quot;Spread High price = &quot;, np.ptp(h)</span><br><span class="line">print &quot;Spread Low Price = &quot;, np.ptp(l)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">Spread High price =  24.86</span><br><span class="line">Spread Low Price =  26.97</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 统计分析</span><br><span class="line">c = np.loadtxt(&apos;Apple_Partion_StockPrices.csv&apos;, delimiter=&apos;,&apos;, usecols=(6,), unpack=True)</span><br><span class="line">print &quot;中位值 = &quot;, np.median(c)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">median =  352.055</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">print np.msort(c)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 336.1   338.61  339.32  342.62  342.88  343.44  344.32  345.03  346.5</span><br><span class="line">  346.67  348.16  349.31  350.56  351.88  351.99  352.12  352.47  353.21</span><br><span class="line">  354.54  355.2   355.36  355.76  356.85  358.16  358.3   359.18  359.56</span><br><span class="line">  359.9   360.    363.13]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 方差</span><br><span class="line">print np.mean((c - c.mean()) ** 2)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">50.1265178889</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 股票收益率</span><br><span class="line">c = np.loadtxt(&apos;Apple_Partion_StockPrices.csv&apos;, delimiter=&apos;,&apos;, usecols=(6,), unpack=True)</span><br><span class="line"></span><br><span class="line"># 标准收益</span><br><span class="line">returns = np.diff(c) / c[:-1]</span><br><span class="line">print np.std(returns)</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">0.0129221344368</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"># 对数收益</span><br><span class="line">logreturns = np.diff(np.log(c))</span><br><span class="line">print logreturns</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 0.00953488  0.01668775 -0.00205991 -0.00255903  0.00887039  0.01540739</span><br><span class="line">  0.0093908   0.0082988  -0.01015864  0.00649435  0.00650813  0.00200256</span><br><span class="line">  0.00893468 -0.01339027 -0.02183875 -0.03468287  0.01177296  0.00075857</span><br><span class="line">  0.01528161  0.01440064 -0.011103    0.00801225  0.02090904  0.00122297</span><br><span class="line"> -0.01297267  0.00112499 -0.00929083 -0.01659219  0.01522945]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 日期分析</span><br><span class="line"># Monday = 0</span><br><span class="line"># Tuesday = 1</span><br><span class="line"># Wednesday = 2</span><br><span class="line"># Thursday = 3</span><br><span class="line"># Friday = 4</span><br><span class="line"># Saturday = 5</span><br><span class="line"># Sunday = 6</span><br><span class="line">from datetime import datetime</span><br><span class="line"></span><br><span class="line">def datestr2num(s):</span><br><span class="line">    return datetime.strptime(s, &quot;%d-%m-%Y&quot;).date().weekday()</span><br><span class="line"></span><br><span class="line">dates, close = np.loadtxt(&apos;Apple_Partion_StockPrices.csv&apos;, delimiter=&apos;,&apos;, usecols=(1, 6), converters=&#123;1: datestr2num&#125;, unpack=True)</span><br><span class="line">print dates</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">[ 4.  0.  1.  2.  3.  4.  0.  1.  2.  3.  4.  0.  1.  2.  3.  4.  1.  2.</span><br><span class="line">  3.  4.  0.  1.  2.  3.  4.  0.  1.  2.  3.  4.]</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line"></span><br><span class="line">averages = np.zeros(5)</span><br><span class="line"></span><br><span class="line">for i in range(5):</span><br><span class="line">    indices = np.where(dates == i)</span><br><span class="line">    prices = np.take(close, indices)</span><br><span class="line">    avg = np.mean(prices)</span><br><span class="line">    print &quot;Day = &quot;, i, &quot;, Prices = &quot;, prices, &quot;, Average = &quot;, avg</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">Day =  0 , Prices =  [[ 339.32  351.88  359.18  353.21  355.36]] , Average =  351.79</span><br><span class="line">Day =  1 , Prices =  [[ 345.03  355.2   359.9   338.61  349.31  355.76]] , Average =  350.635</span><br><span class="line">Day =  2 , Prices =  [[ 344.32  358.16  363.13  342.62  352.12  352.47]] , Average =  352.136666667</span><br><span class="line">Day =  3 , Prices =  [[ 343.44  354.54  358.3   342.88  359.56  346.67]] , Average =  350.898333333</span><br><span class="line">Day =  4 , Prices =  [[ 336.1   346.5   356.85  350.56  348.16  360.    351.99]] , Average =  350.022857143</span><br><span class="line">&apos;&apos;&apos;</span><br></pre></td></tr></table></figure>
<p><a href="/files/csv/Apple_Partion_StockPrices.csv">Apple_Partion_StockPrices.csv 文件下载地址</a></p>
<p><br><br><br><br><br></p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li><a href="http://www.googleplus.party/categories/AI/" target="_blank" rel="noopener">http://www.googleplus.party/categories/AI/</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/24309547" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/24309547</a></li>
</ul>


  </article>
  </script>
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
  </script>
  <div class="busuanzi center">
    页阅读量:&nbsp;<span id="busuanzi_value_page_pv"></span>&nbsp;・&nbsp;
    站访问量:&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;・&nbsp;
    站访客数:&nbsp;<span id="busuanzi_value_site_uv"></span>
  </div>




    </div>
  </div>
  <footer class="page-footer"><div class="clearfix">
</div>
<div class="right-foot container">
    <div class="firstrow">
        <a href="#top" target="_self">
        <svg class="i-caret-right" viewBox="0 0 32 32" width="24" height="24" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
            <path d="M10 30 L26 16 10 2 Z"></path>
        </svg>
        </a>
        © Victor Zhang 2014-2018
    </div>
    <div class="secondrow">
        <a href="https://github.com/gaoryrt/hexo-theme-pln">
        Theme Pln
        </a>
    </div>
</div>
<div class="clearfix">
</div>
</footer>
  <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<script src="/js/search.min.js"></script>
<script type="text/javascript">

// disqus scripts


// dropdown scripts
$(".dropdown").click(function(event) {
  var current = $(this);
  event.stopPropagation();
  $(current).children(".dropdown-content")[($(current).children(".dropdown-content").hasClass("open"))?'removeClass':'addClass']("open")
});
$(document).click(function(){
    $(".dropdown-content").removeClass("open");
})

var path = "/search.xml";
searchFunc(path, 'local-search-input', 'local-search-result');

</script>

</body>
</html>
